# 常见问题
## 启动前问题
### room.json 疑似使用utf-8-sig形式保存，尝试对应读取方式
这是由于手动编辑 room.json 时以 UTF-8-BOM 形式保存所致（通常是用windows自带的notepad编辑所致），软件会自动切换读取方式，不用担心。

如果不希望该警告出现，可以用如 [Notepad--](https://github.com/cxasm/notepad--) 之类的软件编辑，点击编码(Encoding)-转换为UTF-8编码(Convert to UTF-8)。

### room.json 无法读取或读取的主播名出现乱码
这通常是因为手动编辑 room.json 时没有以 UTF-8 格式保存，或主播名出现特殊符号如✨😄之类的表情符号导致的。

请把 room.json 以 UTF-8 格式保存，如果主播名称出现特殊符号，请把特殊符号删除或改成其他UTF-8内的符号。

### 能同时录制1000个主播吗？
如果是命令行模式，可以，但由于非重要主播是在同一个线程中(config中check_threads=1的情况下)进行排队检测，因此主播数量越多，捕捉到开播越不及时，即容易“迟到”。
GUI模式下，主播数量太多，GUI会卡，可能会闪退。

如果将一个主播设置为重要主播，将会使用独立线程进行检测，会更加及时捕捉到开播。但是不建议设置太多重要主播，频繁大量检测容易被封禁。

需要及时录制的主播特别多的情况下，建议分散到多台机器上进行检测和录制。

特别提醒：录制这么多主播疑似非法商业需求，请勿用于商业用途，已有非法修改该类软件并用于非法用途的人被相关机关逮捕，请大家引以为戒。

## 运行时问题
### 各种偶尔的录制中断问题
通常网络波动（自己的或抖音或主播的都有可能）都会造成录制中断（视频录制或弹幕录制），如果使用代理，代理的波动也可能造成录制中断。

若出现中断，软件会立刻自动重试，不会等到下一次监测周期，以免漏掉太多没录到。

为了尽量录全，有条件可以使用多台机器同时录制，以软件作者的情况为例，三台异地的机器同时录同一个主播，三台机器中断的时间都一模一样，这说明是抖音或主播的网络问题。

### 多次重试无法访问资源，可能是cookie失效
cookie失效是很正常的，软件会重新获取cookie，一小时内反复出现多次cookie失效都正常。

如果该报错反复不停刷屏，可能是录制主播数量过多被风控了，也可能是软件失效了，请检查软件是否更新。

## 弹幕录制问题
### 弹幕文件被分成了多个
录制过程中由于网络问题或抖音主动切断，导致弹幕录制中断，此时会自动检测是否还在直播，若未下播则继续录制弹幕，会产生一个新的弹幕文件。

### 重复录制多个一模一样或差别不大的弹幕
之前有一个导致录制弹幕中断的问题，即实际上直播未结束，弹幕也一直有人在发，连接也没有中断，但就是没有收到弹幕。
于是加上了一些保险，如果1分钟内没有弹幕，无论是不是真的没人发弹幕，都重试一下。可能有bug，导致多录了几个文件，删除多余的即可。

### 录制弹幕数量缺失
如上述所说，有一个导致录制弹幕中断的问题，即实际上直播未结束，弹幕也一直有人在发，连接也没有中断，但就是没有收到弹幕。
即便加上了上述保险，也有可能一直录不到弹幕，这通常是同时录制的主播数量太多了，触发了风控所致。

## 对录到的文件处理时的问题
### ffmpeg 处理视频文件时出现 Unsupported codec in video frame: 12
这是由于主播采用 HEVC 格式进行推流，而 FLV 目前是不支持 HEVC 的。
目前国内 codec 12 是由中国云厂商自己修改定义的，不是 FLV 标准里的，所以目前这种编码格式是违反标准，或者说与标准不兼容的，因此 ffmpeg 自然也不支持。
不过，你仍然可以使用魔改版的 ffmpeg 进行处理，可进行网上搜索，关键词例：`让ffmpeg的flv支持hevc`

## 使用与修改许可
软件主要以科研为目的，禁止用于任何形式的直接或间接的商业用途，包括**但不限于**付费帮录制、付费定制改版软件、付费分发本软件或本软件的改版、直接以本软件作为付费爬虫课程的案例等。

禁止非法修改，包括**但不限于**往软件中植入病毒木马、非法获取用户隐私等

禁止非法使用，包括**但不限于**未经主播本人同意非法录制和上传直播录像、用于非法监控他人、大量录制给抖音服务器造成压力等。

任何非法修改与非法使用等均与软件作者本人无关，由非法修改者或非法使用者负责。

由于作者本人能力有限，软件有很多缺陷，欢迎指教，欢迎参考或开源改版。
